@using Microsoft.AspNetCore.Identity
@inject SignInManager<News_Project.Models.User> SignInManager
@inject UserManager<News_Project.Models.User> UserManager
@inject News_Project.Models.NewsDbContext DbContext
@{
    var categories = DbContext.Categories.OrderBy(c => c.Name).ToList();
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - News Project</title>
    <script src="https://cdn.tailwindcss.com"></script>
    @RenderSection("Styles", required: false)
</head>
<body class="bg-gray-100 min-h-screen flex flex-col">
    <!-- Header ngang -->
    <header class="bg-red-700 text-white w-full shadow sticky top-0 z-50">
        <div class="container mx-auto flex items-center justify-between py-3 px-4">
            <div class="font-bold text-xl flex items-center gap-2">
                <span>News Project</span>
            </div>
            <nav class="flex-1 flex justify-center gap-4 flex-wrap">
                <a href="/" class="hover:underline font-semibold">Trang chủ</a>
                @foreach (var cat in categories)
                {
                    <a href="/Category/@cat.CategoryId" class="hover:underline">@cat.Name</a>
                }
            </nav>
            <div class="flex items-center gap-3">
                @if (!User.Identity.IsAuthenticated)
                {
                    <a href="/Identity/Account/Login" class="bg-white text-red-700 px-4 py-2 rounded font-bold hover:bg-gray-100 transition">Đăng nhập</a>
                }
                else if (User.IsInRole("editor"))
                {
                    <a href="/CreateNews" class="bg-blue-600 text-white px-4 py-2 rounded font-bold hover:bg-blue-700 transition">Tạo bài viết mới</a>
                    <a href="/UserProfile" class="bg-white text-red-700 px-4 py-2 rounded font-bold hover:bg-gray-100 transition">@User.Identity.Name</a>
                    <form method="post" asp-area="Identity" asp-page="/Account/Logout" class="inline">
                        <button type="submit" class="ml-2 hover:underline text-white bg-red-600 px-3 py-2 rounded">Đăng xuất</button>
                    </form>
                }
                else
                {
                    <a href="/UserProfile" class="bg-white text-red-700 px-4 py-2 rounded font-bold hover:bg-gray-100 transition">@User.Identity.Name</a>
                    <form method="post" asp-area="Identity" asp-page="/Account/Logout" class="inline">
                        <button type="submit" class="ml-2 hover:underline text-white bg-red-600 px-3 py-2 rounded">Đăng xuất</button>
                    </form>
                }
            </div>
        </div>
    </header>
    <main class="flex-1 p-6 container mx-auto">
        @RenderBody()
    </main>
    @RenderSection("Scripts", required: false)
</body>
</html>
